# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Flutter Template Projectã®packagesãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§é–‹ç™ºã‚’è¡Œã†äººé–“ã®é–‹ç™ºè€…å‘ã‘ã®è©³ç´°ãªã‚¬ã‚¤ãƒ‰ã§ã™ã€‚

## ğŸ¯ ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç›®çš„

- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºã®æ¨™æº–åŒ–ã•ã‚ŒãŸæ‰‹é †ã®æä¾›
- ãƒãƒ¼ãƒ é–“ã§ã®ä¸€è²«ã—ãŸé–‹ç™ºãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®ç¢ºç«‹
- æ–°ãƒ¡ãƒ³ãƒãƒ¼ã®å††æ»‘ãªã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ”¯æ´
- ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰ã®æ”¯æ´

## ğŸ“¦ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### è¨­è¨ˆæ€æƒ³

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€æ©Ÿèƒ½ã‚’ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¥ã«åˆ†é›¢ã—ãŸãƒã‚¤ã‚¯ãƒ­ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä»¥ä¸‹ã®åŸå‰‡ã«å¾“ã„ã¾ã™ï¼š

- **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: ä¸€ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä¸€ã¤ã®æ˜ç¢ºãªè²¬ä»»ã‚’æŒã¤
- **ç–çµåˆ**: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ä¾å­˜é–¢ä¿‚ã‚’æœ€å°é™ã«æŠ‘åˆ¶
- **é«˜å‡é›†**: é–¢é€£ã™ã‚‹æ©Ÿèƒ½ã‚’ä¸€ã¤ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«é›†ç´„
- **å†åˆ©ç”¨æ€§**: ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã‚‚åˆ©ç”¨å¯èƒ½ãªè¨­è¨ˆ
- **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ç‹¬ç«‹ã—ãŸãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒå¯èƒ½

### ç¾åœ¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹æˆ

#### app_preferences

**ç›®çš„**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®šã®ç®¡ç†  
**è²¬ä»»ç¯„å›²**:

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¨€èªè¨­å®šï¼ˆæ—¥æœ¬èª/è‹±èªï¼‰
- ãƒ†ãƒ¼ãƒè¨­å®šï¼ˆã‚·ã‚¹ãƒ†ãƒ /ãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ï¼‰
- è¨­å®šå€¤ã®æ°¸ç¶šåŒ–ï¼ˆSharedPreferencesï¼‰
- è¨­å®šå¤‰æ›´UIï¼ˆãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã€è¡¨ç¤ºã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:

- çŠ¶æ…‹ç®¡ç†: Riverpod + hooks_riverpod
- æ°¸ç¶šåŒ–: SharedPreferences
- å›½éš›åŒ–: slangï¼ˆå‹å®‰å…¨ãªç¿»è¨³ï¼‰
- UI: Material 3 Design System
- ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£: Clean Architecture

## ğŸš€ é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

```bash
# Flutter SDKï¼ˆfvmã§ç®¡ç†ï¼‰
fvm --version

# Melosï¼ˆãƒ¢ãƒãƒ¬ãƒç®¡ç†ï¼‰
melos --version

# Node.jsï¼ˆcommitlintã€prettierç”¨ï¼‰
node --version
npm --version
```

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone [repository-url]
cd flutter_template_project

# 2. Flutterç’°å¢ƒã®è¨­å®š
fvm use

# 3. ä¾å­˜é–¢ä¿‚ã®è§£æ±º
melos bootstrap

# 4. ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
melos run gen

# 5. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆç’°å¢ƒç¢ºèªï¼‰
melos run test
```

## ğŸ“‹ æ–°è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºãƒ•ãƒ­ãƒ¼

### å…¨ä½“ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart TD
    A[æ–°è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–‹ç™ºé–‹å§‹] --> B[Phase 1: ä¼ç”»ãƒ»è¨­è¨ˆ]
    B --> C[è¦ä»¶å®šç¾©]
    C --> D[ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ]
    D --> E[Phase 2: å®Ÿè£…]
    E --> F[ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ]
    F --> G[åŸºæœ¬è¨­å®š]
    G --> H[å®Ÿè£…é †åº]
    H --> I[ã‚³ãƒ¼ãƒ‰å“è³ªç¢ºä¿]
    I --> J[Phase 3: ãƒ†ã‚¹ãƒˆ]
    J --> K[ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ç­–å®š]
    K --> L[ãƒ†ã‚¹ãƒˆå®Ÿè£…]
    L --> M[Phase 4: çµ±åˆãƒ»å…¬é–‹]
    M --> N[ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç™»éŒ²]
    N --> O[ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªçµ±åˆ]
    O --> P[åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰]
    P --> Q[å®Œäº†]

    %% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
    classDef phaseBox fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef actionBox fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    classDef checkBox fill:#e8f5e8,stroke:#2e7d32,stroke-width:1px

    class B,E,J,M phaseBox
    class C,D,F,G,H,I,K,L,N,O,P actionBox
    class A,Q checkBox
```

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å®Ÿè£…ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart LR
    subgraph "å®Ÿè£…é †åº"
        A[ãƒ¢ãƒ‡ãƒ«å±¤] --> B[ãƒªãƒã‚¸ãƒˆãƒªå±¤]
        B --> C[ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å±¤]
        C --> D[ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå±¤]
        D --> E[å…¬é–‹API]
    end

    subgraph "å„å±¤ã®è²¬ä»»"
        A1[ãƒ‡ãƒ¼ã‚¿æ§‹é€ å®šç¾©<br/>- Entity<br/>- Value Object<br/>- DTOs]
        B1[ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹<br/>- Repositoryå®Ÿè£…<br/>- Interfaceå®šç¾©<br/>- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°]
        C1[ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯<br/>- Stateç®¡ç†<br/>- Riverpod Provider<br/>- çŠ¶æ…‹å¤‰æ›´ãƒ­ã‚¸ãƒƒã‚¯]
        D1[UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ<br/>- Widgetå®Ÿè£…<br/>- Dialogå®Ÿè£…<br/>-è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯]
        E1[å¤–éƒ¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹<br/>- Public API<br/>- Exportè¨­å®š<br/>- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ]
    end

    A -.-> A1
    B -.-> B1
    C -.-> C1
    D -.-> D1
    E -.-> E1

    %% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
    classDef implLayer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef responsibility fill:#f1f8e9,stroke:#689f38,stroke-width:1px

    class A,B,C,D,E implLayer
    class A1,B1,C1,D1,E1 responsibility
```

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart TD
    A[ãƒ†ã‚¹ãƒˆå®Ÿè£…é–‹å§‹] --> B{ãƒ†ã‚¹ãƒˆã®ç¨®é¡}
    
    B -->|Unit Test| C[ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ]
    B -->|Widget Test| D[ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ]
    B -->|Integration Test| E[çµ±åˆãƒ†ã‚¹ãƒˆ]
    
    C --> C1[ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ]
    C --> C2[ãƒªãƒã‚¸ãƒˆãƒªãƒ†ã‚¹ãƒˆ]
    C --> C3[ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ]
    
    D --> D1[UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ]
    D --> D2[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ]
    D --> D3[çŠ¶æ…‹å¤‰åŒ–ãƒ†ã‚¹ãƒˆ]
    
    E --> E1[ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ]
    E --> E2[å¤–éƒ¨ä¾å­˜é–¢ä¿‚ãƒ†ã‚¹ãƒˆ]
    E --> E3[ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ]
    
    C1 --> F[ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯]
    C2 --> F
    C3 --> F
    D1 --> F
    D2 --> F
    D3 --> F
    E1 --> F
    E2 --> F
    E3 --> F
    
    F --> G[é™çš„è§£æ]
    F --> H[ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ]
    F --> I[ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª]
    
    G --> J{å“è³ªåŸºæº–<br/>ã‚¯ãƒªã‚¢ï¼Ÿ}
    H --> J
    I --> J
    
    J -->|Yes| K[ãƒ†ã‚¹ãƒˆå®Œäº†]
    J -->|No| L[ä¿®æ­£ãƒ»æ”¹å–„]
    L --> C
    
    %% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
    classDef testType fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef testDetail fill:#f8bbd9,stroke:#c2185b,stroke-width:1px
    classDef quality fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef decision fill:#fff3e0,stroke:#f57c00,stroke-width:2px

    class C,D,E testType
    class C1,C2,C3,D1,D2,D3,E1,E2,E3 testDetail
    class F,G,H,I,K quality
    class J decision
```

### CI/CDçµ±åˆãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart LR
    subgraph "é–‹ç™ºè€…"
        A[ã‚³ãƒ¼ãƒ‰å¤‰æ›´] --> B[git push]
    end
    
    subgraph "GitHub Actions"
        B --> C[PRä½œæˆ/æ›´æ–°]
        C --> D[packages/**<br/>ãƒ‘ã‚¹æ¤œå‡º]
        D --> E[Flutterç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—]
        E --> F[ä¾å­˜é–¢ä¿‚è§£æ±º<br/>melos bootstrap]
        F --> G[ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ<br/>melos run gen]
        G --> H[ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ<br/>melos run test]
        H --> I[é™çš„è§£æ<br/>melos run analyze]
        I --> J[ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯<br/>melos run ci:format]
        J --> K{å…¨ãƒã‚§ãƒƒã‚¯<br/>PASSï¼Ÿ}
        K -->|Yes| L[âœ… ãƒãƒ¼ã‚¸å¯èƒ½]
        K -->|No| M[âŒ ä¿®æ­£ãŒå¿…è¦]
    end
    
    subgraph "å“è³ªã‚²ãƒ¼ãƒˆ"
        N[ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸<br/>80%ä»¥ä¸Š]
        O[è¤‡é›‘åº¦ãƒã‚§ãƒƒã‚¯<br/>é©åˆ‡ãªãƒ¬ãƒ™ãƒ«]
        P[ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯<br/>å¾ªç’°ä¾å­˜ãªã—]
    end
    
    H -.-> N
    I -.-> O
    I -.-> P
    
    M --> Q[é–‹ç™ºè€…ã¸é€šçŸ¥]
    Q --> R[ä¿®æ­£ä½œæ¥­]
    R --> A
    
    %% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
    classDef developer fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef ci fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef quality fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef success fill:#c8e6c9,stroke:#388e3c,stroke-width:3px
    classDef failure fill:#ffcdd2,stroke:#d32f2f,stroke-width:3px

    class A,B developer
    class C,D,E,F,G,H,I,J ci
    class N,O,P quality
    class L success
    class M,Q,R failure
```

### ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹é€ å›³

```mermaid
flowchart TB
    subgraph "Package Architecture"
        subgraph "Public API Layer"
            API[package_name.dart<br/>å…¬é–‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹]
        end
        
        subgraph "Presentation Layer"
            W1[Widgets]
            W2[Dialogs]
            W3[UI Components]
        end
        
        subgraph "Business Logic Layer"
            P1[Providers<br/>@riverpod]
            P2[Notifiers]
            P3[State Management]
        end
        
        subgraph "Data Layer"
            R1[Repositories]
            R2[Interfaces]
            R3[Data Sources]
        end
        
        subgraph "Domain Layer"
            M1[Models]
            M2[Entities]
            M3[Value Objects]
        end
        
        subgraph "Infrastructure"
            U1[Utils]
            U2[Extensions]
            U3[Constants]
            E1[Exceptions]
        end
    end
    
    subgraph "External Dependencies"
        EXT1[SharedPreferences]
        EXT2[HTTP Client]
        EXT3[External APIs]
    end
    
    %% ä¾å­˜é–¢ä¿‚
    API --> W1
    API --> P1
    W1 --> P1
    W2 --> P1
    W3 --> P1
    P1 --> R1
    P2 --> R1
    P3 --> R1
    R1 --> R2
    R1 --> M1
    R3 --> EXT1
    R3 --> EXT2
    R3 --> EXT3
    M1 --> M2
    M1 --> M3
    P1 --> U1
    R1 --> U2
    W1 --> U3
    P1 --> E1
    R1 --> E1
    
    %% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
    classDef publicAPI fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    classDef presentation fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef business fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef data fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef domain fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef infrastructure fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    classDef external fill:#efebe9,stroke:#5d4037,stroke-width:2px

    class API publicAPI
    class W1,W2,W3 presentation
    class P1,P2,P3 business
    class R1,R2,R3 data
    class M1,M2,M3 domain
    class U1,U2,U3,E1 infrastructure
    class EXT1,EXT2,EXT3 external
```

### Phase 1: ä¼ç”»ãƒ»è¨­è¨ˆ

#### 1.1 è¦ä»¶å®šç¾©

æ–°ã—ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹å‰ã«ã€ä»¥ä¸‹ã‚’æ˜ç¢ºã«ã—ã¦ãã ã•ã„ï¼š

````markdown
## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¼ç”»æ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

### åŸºæœ¬æƒ…å ±

- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å: [snake_case]
- ç›®çš„: [ä¸€æ–‡ã§è¡¨ç¾]
- å¯¾è±¡ãƒ‰ãƒ¡ã‚¤ãƒ³: [ä¾‹: èªè¨¼, é€šçŸ¥, ãƒ‡ãƒ¼ã‚¿åŒæœŸ]

### æ©Ÿèƒ½è¦ä»¶

- [ ] ä¸»è¦æ©Ÿèƒ½1
- [ ] ä¸»è¦æ©Ÿèƒ½2
- [ ] ä¸»è¦æ©Ÿèƒ½3

### éæ©Ÿèƒ½è¦ä»¶

- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶
- [ ] å¯ç”¨æ€§è¦ä»¶

### æŠ€è¡“ä»•æ§˜

- çŠ¶æ…‹ç®¡ç†: Riverpod
- æ°¸ç¶šåŒ–: [SharedPreferences / SQLite / ãªã©]
- å¤–éƒ¨API: [ã‚ã‚Œã°è¨˜è¼‰]
- ç‰¹åˆ¥ãªä¾å­˜é–¢ä¿‚: [ã‚ã‚Œã°è¨˜è¼‰]

### å…¬é–‹APIè¨­è¨ˆ

```dart
// æƒ³å®šã•ã‚Œã‚‹å…¬é–‹APIã®è¨­è¨ˆä¾‹
class SomeFeature {
  Future<void> initialize();
  Future<Result> performAction();
}
```
````

#### 1.2 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å†…éƒ¨æ§‹é€ ã‚’è¨­è¨ˆã—ã¾ã™ï¼š

```bash
lib/
â”œâ”€â”€ [package_name].dart # å…¬é–‹APIå®šç¾©
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ providers/ # çŠ¶æ…‹ç®¡ç†
â”‚ â”‚ â”œâ”€â”€ [feature]_provider.dart
â”‚ â”‚ â””â”€â”€ [feature]\_notifier.dart
â”‚ â”œâ”€â”€ repositories/ # ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å±¤
â”‚ â”‚ â”œâ”€â”€ [feature]\_repository.dart
â”‚ â”‚ â””â”€â”€ interfaces/
â”‚ â”‚ â””â”€â”€ i_[feature]\_repository.dart
â”‚ â”œâ”€â”€ models/ # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚ â”‚ â”œâ”€â”€ [entity].dart
â”‚ â”‚ â””â”€â”€ [value_object].dart
â”‚ â”œâ”€â”€ widgets/ # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚ â”‚ â”œâ”€â”€ [feature]\_widget.dart
â”‚ â”‚ â””â”€â”€ dialogs/
â”‚ â”œâ”€â”€ utils/ # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚ â”‚ â”œâ”€â”€ constants.dart
â”‚ â”‚ â”œâ”€â”€ extensions.dart
â”‚ â”‚ â””â”€â”€ helpers.dart
â”‚ â””â”€â”€ exceptions/ # ä¾‹å¤–å®šç¾©
â”‚ â””â”€â”€ [feature]\_exceptions.dart
â”œâ”€â”€ assets/ # é™çš„ãƒªã‚½ãƒ¼ã‚¹
â”‚ â””â”€â”€ i18n/ # ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ test/ # ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ unit/
â”œâ”€â”€ widget/
â””â”€â”€ integration/

```

### Phase 2: å®Ÿè£…

#### 2.1 ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä½œæˆ

```bash
cd packages
flutter create --template=package your_package_name
cd your_package_name
```

#### 2.2 åŸºæœ¬è¨­å®š

```bash
# ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å¯¾å¿œ
echo "resolution: workspace" >> pubspec.yaml

# ä¾å­˜é–¢ä¿‚è¿½åŠ 
flutter pub add hooks_riverpod riverpod_annotation
flutter pub add --dev build_runner riverpod_generator yumemi_lints

# é™çš„è§£æè¨­å®š
FLUTTER_VERSION=$(flutter --version | head -n 1 | grep -o "[0-9]\+\.[0-9]\+\.[0-9]\+")
cat > analysis_options.yaml << EOF
include: package:yumemi_lints/flutter/${FLUTTER_VERSION}/recommended.yaml

analyzer:
  errors:
    invalid_annotation_target: ignore
  plugins:
    - custom_lint

formatter:
  trailing_commas: preserve
EOF
```

#### 2.3 å®Ÿè£…é †åº

**æ¨å¥¨å®Ÿè£…é †åº:**

1. **ãƒ¢ãƒ‡ãƒ«å±¤**: ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å®šç¾©
2. **ãƒªãƒã‚¸ãƒˆãƒªå±¤**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚¸ãƒƒã‚¯
3. **ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å±¤**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»çŠ¶æ…‹ç®¡ç†
4. **ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå±¤**: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
5. **å…¬é–‹API**: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å¤–éƒ¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

#### 2.4 ã‚³ãƒ¼ãƒ‰å“è³ªã®ç¢ºä¿

å„å®Ÿè£…æ®µéšã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
# ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
dart run build_runner build --delete-conflicting-outputs

# é™çš„è§£æ
dart analyze

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
dart format .

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
flutter test
```

### Phase 3: ãƒ†ã‚¹ãƒˆ

#### 3.1 ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

```markdown
## ãƒ†ã‚¹ãƒˆåˆ†é¡ã¨è²¬ä»»ç¯„å›²

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ (test/unit/)

- ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ­ã‚¸ãƒƒã‚¯
- ãƒªãƒã‚¸ãƒˆãƒªã®å‹•ä½œ
- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ (test/widget/)

- UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¡¨ç¤º
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
- çŠ¶æ…‹å¤‰åŒ–ã®åæ˜ 

### çµ±åˆãƒ†ã‚¹ãƒˆ (test/integration/)

- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å…¨ä½“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- å¤–éƒ¨ä¾å­˜é–¢ä¿‚ã¨ã®é€£æº
```

#### 3.2 ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¾‹

```dart
// test/unit/providers/example_provider_test.dart
import 'package:flutter_test/flutter_test.dart';
import 'package:hooks_riverpod/hooks_riverpod.dart';

void main() {
  group('ExampleProvider', () {
    test('åˆæœŸçŠ¶æ…‹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹', () {
      final container = ProviderContainer();
      final provider = container.read(exampleProvider);

      expect(provider.value, equals(expectedInitialValue));
    });

    test('çŠ¶æ…‹æ›´æ–°ãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () async {
      final container = ProviderContainer();
      final notifier = container.read(exampleProvider.notifier);

      await notifier.updateState(newValue);

      expect(container.read(exampleProvider).value, equals(newValue));
    });
  });
}
```

### Phase 4: çµ±åˆãƒ»å…¬é–‹

#### 4.1 ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç™»éŒ²

```yaml
# ãƒ«ãƒ¼ãƒˆã®pubspec.yamlã«è¿½åŠ 
workspace:
  - apps
  - packages/app_preferences
  - packages/your_package_name # æ–°è¦è¿½åŠ 
```

#### 4.2 ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªçµ±åˆ

```yaml
# apps/pubspec.yamlã«ä¾å­˜é–¢ä¿‚è¿½åŠ 
dependencies:
  your_package_name:
    path: ../packages/your_package_name
```

#### 4.3 åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰

```dart
// apps/lib/main.dart
void main() async {
  WidgetsFlutterBinding.ensureInitialized();

  // ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆæœŸåŒ–
  await YourPackageInitializer.initialize();

  runApp(
    ProviderScope(
      overrides: [
        // å¿…è¦ã«å¿œã˜ã¦ä¾å­˜æ€§æ³¨å…¥
      ],
      child: App(),
    ),
  );
}
```

## ğŸ›  é–‹ç™ºæ™‚ã®ç•™æ„äº‹é …

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

#### Dartã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«

```dart
// âœ… è‰¯ã„ä¾‹: æ˜ç¢ºãªå‘½å
class UserAuthenticationRepository {
  Future<AuthResult> authenticateUser(Credentials credentials) async {
    // å®Ÿè£…
  }
}

// âŒ æ‚ªã„ä¾‹: æ›–æ˜§ãªå‘½å
class AuthRepo {
  Future<dynamic> auth(dynamic creds) async {
    // å®Ÿè£…
  }
}
```

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¨˜è¿°

````dart
/// ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚’ç®¡ç†ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒª
///
/// ã“ã®ã‚¯ãƒ©ã‚¹ã¯ä»¥ä¸‹ã®è²¬ä»»ã‚’æŒã¡ã¾ã™ï¼š
/// - èªè¨¼æƒ…å ±ã®æ¤œè¨¼
/// - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
/// - ãƒˆãƒ¼ã‚¯ãƒ³ã®æ›´æ–°
///
/// ä½¿ç”¨ä¾‹:
/// ```dart
/// final repo = UserAuthenticationRepository();
/// final result = await repo.authenticateUser(credentials);
/// ```
class UserAuthenticationRepository {
  // å®Ÿè£…
}
````

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```dart
// ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–ã®å®šç¾©
class AuthenticationException implements Exception {
  const AuthenticationException(this.message, [this.code]);

  final String message;
  final String? code;

  @override
  String toString() => 'AuthenticationException: $message';
}

// ãƒªãƒã‚¸ãƒˆãƒªã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
class UserAuthenticationRepository {
  Future<AuthResult> authenticateUser(Credentials credentials) async {
    try {
      // èªè¨¼å‡¦ç†
      return AuthResult.success(user);
    } on NetworkException catch (e) {
      throw AuthenticationException('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ', 'NETWORK_ERROR');
    } catch (e) {
      throw AuthenticationException('äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ', 'UNKNOWN_ERROR');
    }
  }
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

```dart
// âœ… è‰¯ã„ä¾‹: é©åˆ‡ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ä½¿ã„åˆ†ã‘
@riverpod
class ExpensiveDataNotifier extends _$ExpensiveDataNotifier {
  @override
  Future<ExpensiveData> build() async {
    // é‡ã„å‡¦ç†ã¯å¿…è¦æ™‚ã®ã¿å®Ÿè¡Œ
    return await loadExpensiveData();
  }
}

// âœ… è‰¯ã„ä¾‹: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®æ´»ç”¨
@Riverpod(keepAlive: true)
Future<ConfigData> configData(ConfigDataRef ref) async {
  // è¨­å®šãƒ‡ãƒ¼ã‚¿ã¯ä¸€åº¦èª­ã¿è¾¼ã‚“ã ã‚‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  return await loadConfigData();
}
```

## ğŸ”„ ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### GitHub Actionsé€£æº

ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å¤‰æ›´æ™‚ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ï¼š

```yaml
# .github/workflows/packages-check.yml
name: Packages Check
on:
  pull_request:
    paths:
      - 'packages/**'

jobs:
  package-quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Flutter
        uses: ./.github/actions/setup-flutter

      - name: Generate code
        run: melos run gen

      - name: Run tests
        run: melos run test

      - name: Static analysis
        run: melos run analyze

      - name: Check formatting
        run: melos run ci:format
```

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### æ©Ÿèƒ½é¢

- [ ] è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡ã‹
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å•é¡ŒãŒãªã„ã‹

#### è¨­è¨ˆé¢

- [ ] å˜ä¸€è²¬ä»»åŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹ã‹
- [ ] é©åˆ‡ãªæŠ½è±¡åŒ–ãƒ¬ãƒ™ãƒ«ã‹
- [ ] ä¾å­˜é–¢ä¿‚ãŒæœ€å°é™ã‹
- [ ] æ‹¡å¼µæ€§ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹

#### ã‚³ãƒ¼ãƒ‰å“è³ª

- [ ] å‘½åãŒæ˜ç¢ºã§ä¸€è²«ã—ã¦ã„ã‚‹ã‹
- [ ] ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒé©åˆ‡ã‹
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒååˆ†ã‹
- [ ] é™çš„è§£æã‚’ãƒ‘ã‚¹ã—ã¦ã„ã‚‹ã‹

## ğŸ“Š ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹

```bash
# ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª
flutter test --coverage
genhtml coverage/lcov.info -o coverage/html

# è¤‡é›‘åº¦åˆ†æ
dart run dart_code_metrics:metrics analyze lib

# ä¾å­˜é–¢ä¿‚ã®å¯è¦–åŒ–
melos deps graph
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š

```dart
// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ã®ä¾‹
class PerformanceLogger {
  static Future<T> measure<T>(
    String operation,
    Future<T> Function() action,
  ) async {
    final stopwatch = Stopwatch()..start();
    try {
      final result = await action();
      stopwatch.stop();
      print('$operation: ${stopwatch.elapsedMilliseconds}ms');
      return result;
    } catch (e) {
      stopwatch.stop();
      print('$operation failed after ${stopwatch.elapsedMilliseconds}ms: $e');
      rethrow;
    }
  }
}
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. ã‚³ãƒ¼ãƒ‰ç”ŸæˆãŒå¤±æ•—ã™ã‚‹

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
flutter clean
dart run build_runner clean

# å†ç”Ÿæˆ
dart run build_runner build --delete-conflicting-outputs
```

#### 2. ä¾å­˜é–¢ä¿‚ã®ç«¶åˆ

```bash
# ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
flutter pub deps

# workspace resolutionã®ç¢ºèª
melos list --graph
```

#### 3. ãƒ†ã‚¹ãƒˆãŒä¸å®‰å®š

```bash
# ãƒ†ã‚¹ãƒˆã®ä¸¦åˆ—å®Ÿè¡Œã‚’ç„¡åŠ¹åŒ–
flutter test --concurrency=1

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
flutter test test/specific_test.dart
```

## ğŸ“š å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Flutter Package Development](https://docs.flutter.dev/development/packages-and-plugins/developing-packages)
- [Riverpod Documentation](https://riverpod.dev/)
- [Melos Documentation](https://melos.invertase.dev/)

### å†…éƒ¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®CLAUDE.md](../CLAUDE.md)
- [ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã‚¬ã‚¤ãƒ‰](../apps/README.md)
- [ã‚³ãƒŸãƒƒãƒˆè¦ç´„](../docs/commitlint-setup.md)

### æ¨å¥¨æ›¸ç±ãƒ»è¨˜äº‹

- Clean Architecture (Robert C. Martin)
- Flutter in Action (Eric Windmill)
- Effective Dart (dart.dev)

## ğŸ’¬ è³ªå•ãƒ»ã‚µãƒãƒ¼ãƒˆ

### ç¤¾å†…ã‚µãƒãƒ¼ãƒˆ

- **æŠ€è¡“è³ªå•**: #flutter-help Slackãƒãƒ£ãƒ³ãƒãƒ«
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç›¸è«‡**: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆãƒãƒ¼ãƒ ã¾ã§
- **ç·Šæ€¥æ™‚å¯¾å¿œ**: ã‚ªãƒ³ã‚³ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¾ã§

### å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹

- Flutter ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£: [Discord](https://discord.gg/flutter)
- Stack Overflow: `flutter` ã‚¿ã‚°
- GitHub Issues: å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒªãƒã‚¸ãƒˆãƒª

---

ã“ã®ã‚¬ã‚¤ãƒ‰ãŒçš†ã•ã‚“ã®é–‹ç™ºã‚’æ”¯æ´ã—ã€é«˜å“è³ªãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã«è²¢çŒ®ã™ã‚‹ã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ã€‚è³ªå•ã‚„æ”¹å–„ææ¡ˆãŒã‚ã‚Œã°ã€ã„ã¤ã§ã‚‚ãŠæ°—è»½ã«ãŠå£°ãŒã‘ãã ã•ã„ã€‚
